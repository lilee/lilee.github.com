---
layout: post
title: "开发自己的C++基础库"
description: ""
category: 技术
tags: [cpp,基础库]
---


# 为什么要开发基础库
“不要重新发明轮子”其实就是为什么我们需要开发基础库的暗喻。在做项目的过程中，或是在github上维护开源项目的过程中，我们可以把那些一般的和业务逻辑无关的代码抽象出来单独维护。这些抽象出来的代码可以非常方便的的应用在其他项目中，由于该代码已经在以前的项目中验证为可靠且行之有效的，我们在当前项目中就不必再去验证该复用代码的正确性，而是把更多的关注点放到该项目处理的业务逻辑上来。项目代码的可靠性在一定程度上得到了增强，项目代码的开发周期和维护周期也有可观的缩短

随着项目越做越多，基础库也进化的越来越丰富和完善。尤其是基础库在频繁被使用的过程中不断的发现问题并修复。

## 为什么开发自己的基础库
我在github上会开发项目，开发的项目会使用到事先建立好的基础库以简化项目的开发工作，事先建立好的基础库或是从其他开源代码中抽取（如google开源的protobuf中有对数字进行变长编码的代码），或是自己平时工作的积累。在github上开发项目也会不断的丰富我的基础库，这些基础库就是我宝贵实战经验的物质化积累

# 一个好的基础库的定义
既然要开发属于自己的基础库，我们必须在开发之前弄清楚一个好的基础库需要具备什么。什么样的基础库才是一个好的基础库？

我工作所在的团队就维护了一个非常好的基础库，目前团队中项目的开发都是基于该基础库。我将它做的好的地方进行总结，作为我对一个好的基础库下的定义。我所创建的基础库也要遵循这几点定义:

1. **统一的编码风格，规范的编码格式**  
  不解释

2. **详细的头文件注释**  
  包括如何使用，需要注意什么都需要在头文件中有非常详细的说明。

3. **清晰的目录结构**  
  用户在只需要看目录名就能大概的知道该目录下的模块的功能，一般来说目录层级不要超过两层

4. **充分的单元测试**  
  因为基础，所以对其要求的可靠性非常高，要求有非常充分的单元测试来保证，基础库中的任何代码修改，都必须要保证单元测试很够通过，以确保不会改出问题，影响使用

5. **一个模块解决一个问题，并确实能够简化一个问题**  
  比如基础库中有一个字符串和数字相互转换的模块，用户使用该模块可以非常方便的将字符串转换为数字，或是将数字转换为字符串（多种进制）

# 我的基础库规划

下面是我的基础库规划的目录结构，大体是下面这样，后面一定会有较大的调整

    .
    |-- algorithm/
    |-- asio/
    |-- concurrent/
    |   |-- atomic/
    |-- io/
    |-- pool/
    |-- string/



